define(["exports","preact/jsx-runtime","preact/hooks","./hooks/PRIVATE_useMessagesFocusManager","./PRIVATE_Message","./UNSAFE_Flex","./UNSAFE_LiveRegion","./Flex-f922bd14","./MessagesManager-815876b7","./MessageUtils-e1daf68f",'module',"./utils/PRIVATE_timer","./utils/UNSAFE_classNames","./classNames-2ba58777","./MessageCloseButton-fc804358","./UNSAFE_Button","./Button-dc28bc46","./UNSAFE_BaseButton","./BaseButton-f6b56c16","./tslib.es6-d9d2f5d6","./hooks/UNSAFE_usePress","./hooks/UNSAFE_useHover","./hooks/UNSAFE_useToggle","./hooks/UNSAFE_useActive","preact/compat","./utils/UNSAFE_interpolations/dimensions","./utils/UNSAFE_arrayUtils","./utils/UNSAFE_size","./_curry1-9cbf463f","./utils/UNSAFE_mergeInterpolations","./_curry3-2cf14b96","./_curry2-37583590","./_has-b679fc56","./utils/PRIVATE_clientHints","./clientHints-4aaefa1c","./hooks/UNSAFE_useTabbableMode","preact","./utils/UNSAFE_mergeProps","./index-16862ac7","./index-cf988fc7","./UNSAFE_Icon","./Icon-4325e74f","./hooks/UNSAFE_useTooltip","./hooks/UNSAFE_useId","./UNSAFE_Floating","./Floating-f23a546d","./index-b6f31c6c","./hooks/UNSAFE_useUser","./UNSAFE_Environment","./UNSAFE_Layer","./utils/PRIVATE_floatingUtils","./utils/PRIVATE_refUtils","./hooks/UNSAFE_useOutsideClick","./hooks/UNSAFE_useFocus","./hooks/UNSAFE_useTouch","./hooks/UNSAFE_useAnimation","./useAnimation-c8511df4","./hooks/UNSAFE_useTheme","./MessageDetail-c1e0cdc2","./MessageFormattingUtils-95f48c88","./utils/UNSAFE_getLocale","./utils/UNSAFE_stringUtils","./stringUtils-1ad4f59d","./Message.types-97d3e7a4","./MessageStartIcon-665f54bc","./MessageSummary-4bfdff83","./MessageTimestamp-7b2ca246","./utils/UNSAFE_interpolations/boxalignment","./keys-ac292f2b","./utils/UNSAFE_interpolations/flexbox","./flexbox-f0221a64","./utils/UNSAFE_interpolations/flexitem","./flexitem-4580af77","./utils/UNSAFE_logger","./utils/UNSAFE_soundUtils","./PRIVATE_TransitionGroup","./hooks/UNSAFE_useMessagesContext"],function(e,s,t,n,o,i,a,l,r,u,c,g,d,f,h,_,F,A,E,U,S,m,N,x,b,v,p,k,M,R,y,T,I,j,H,B,P,C,w,O,V,L,z,$,D,G,K,W,q,J,Q,X,Y,Z,ee,se,te,ne,oe,ie,ae,le,re,ue,ce,ge,de,fe,he,_e,Fe,Ae,Ee,Ue,Se,me,Ne){"use strict";const xe={entering:e=>({to:{maxHeight:`${e.scrollHeight}px`,overflow:"hidden"},options:{duration:250},end:{maxHeight:"none",overflow:"initial"}}),exiting:e=>Object.assign(Object.assign({},"none"===e.style.maxHeight&&{from:{maxHeight:`${e.scrollHeight}px`,overflow:"hidden"}}),{to:{maxHeight:0,overflow:"hidden"},end:{maxHeight:0,overflow:"hidden"},options:{duration:250}})},be={maxHeight:0,overflow:"hidden"};e.MessageBanner=function({closeButtonRenderer:e,detailRendererKey:i,data:c,onClose:g,renderers:d,translations:f,type:h="section"}){const _=t.useRef(new Map),F=t.useRef(null),A=t.useRef(null),[E,U]=t.useState(),[S,m]=t.useState(c.length>0),N=t.useRef(c.length),x=t.useRef(0);N.current=c.length;const b=t.useCallback(e=>s=>_.current.set(e,s),[]);t.useImperativeHandle(A,()=>({focus:()=>{var e;if(c.length){const s=c[0].key;return null===(e=_.current.get(s))||void 0===e||e.focus(),!0}return!1},contains:e=>{var s,t;return!(!c.length||!e)&&(null!==(t=null===(s=F.current)||void 0===s?void 0:s.contains(e))&&void 0!==t&&t)}}),[c]);const{controller:v,handlers:p}=n.useMessageFocusManager(A,{onFocus:t.useCallback(()=>{U(null==f?void 0:f.navigationFromMessagesRegion)},[U,f])}),k=t.useCallback(e=>{null==g||g(e)},[g]),M=t.useCallback((e,s,t)=>{var n;const o=null==t?void 0:t.contains(document.activeElement);if(0===N.current)return m(!1),void(o&&v.restorePriorFocus());const i=s+1<c.length?s+1:s-1;if(i>-1&&o){const e=c[i].key;null===(n=_.current.get(e))||void 0===n||n.focus()}},[v,c]);return t.useEffect(()=>{c.length?(m(!0),c.length>x.current&&U(null==f?void 0:f.navigationToMessagesRegion),v.prioritize()):U(""),x.current=c.length},[v,c,f]),S||0!==c.length?s.jsx("div",Object.assign({ref:F,class:"oj-c-messagebanner",tabIndex:-1},p,{children:s.jsxs(l.Flex,Object.assign({direction:"column",gap:"section"===h?"1x":void 0},{children:[s.jsx(r.MessagesManager,Object.assign({animationStates:xe,initialAnimationStyles:be,data:c,onMessageWillRemove:M},{children:({index:t,item:n})=>s.jsx(o.Message,{messageRef:b(n.key),item:n,closeButtonRenderer:e,detailRenderer:u.getRenderer(n,i,d),index:t,variant:"page"===h?"pageBanner":"sectionBanner",onClose:k,translations:f},n.key)})),s.jsx(a.LiveRegion,{children:E})]}))})):null},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=UNSAFE_MessageBanner.js.map
