define(["exports","./tslib.es6-d9d2f5d6","preact/jsx-runtime","preact","preact/hooks","css!./UNSAFE_RatingGauge.css","./utils/UNSAFE_classNames","./classNames-2ba58777","./hooks/UNSAFE_useUser","./hooks/UNSAFE_useTooltip","./utils/UNSAFE_mergeProps","./hooks/UNSAFE_useTabbableMode","./UNSAFE_Environment","./UNSAFE_Layer","preact/compat","./hooks/UNSAFE_useId","./UNSAFE_Floating","./Floating-f23a546d","./index-b6f31c6c","./utils/PRIVATE_floatingUtils","./utils/PRIVATE_refUtils","./hooks/UNSAFE_useOutsideClick","./utils/UNSAFE_arrayUtils","./hooks/UNSAFE_useHover","./hooks/UNSAFE_useToggle","./hooks/UNSAFE_useFocus","./hooks/UNSAFE_useTouch","./hooks/UNSAFE_useAnimation","./useAnimation-c8511df4"],function(e,s,t,a,o,i,l,r,n,c,d,u,b,h,p,m,x,y,v,_,g,f,w,A,R,j,U,k,D){"use strict";const E=({isSelected:e,isDisabled:s,isReadOnly:a,color:o})=>{const i=`${e?"selected":"unselected"}${s&&"Disabled"||a&&"Readonly"||""}`,l=N[`${i}Color`],n=N[`${i}BorderColor`];return t.jsx("svg",Object.assign({viewBox:"0 0 36 36",height:"100%",width:"100%",class:r.classNames([N.base,`oj-c-rating-gauge-${o}`])},{children:t.jsxs("g",{children:[t.jsx("path",{class:l,d:"m18 1 5.0061 11.9524 12.9939 1.0344-9.9 8.4215 3.0246 12.5917-11.1246-6.7476-11.12461 6.7476 3.02461-12.5917-9.9-8.4215 12.9939-1.0344z"}),t.jsx("path",{class:n,d:"m23.0061 12.9524-5.0061-11.9524-5.0061 11.9524-12.9939 1.0344 9.9 8.4215-3.02461 12.5917 11.12461-6.7476 11.1246 6.7476-3.0246-12.5917 9.9-8.4215zm10.5043 1.8394-8.5262 7.2528 2.6077 10.8562-9.5919-5.818-9.59192 5.818 2.60772-10.8562-8.52615-7.2528 11.19115-.891 4.3192-10.31227 4.3192 10.31227z"})]})}))},N={base:"_1ckdhtc",selectedColor:"_1xittp4",selectedBorderColor:"_1emyz2k",unselectedColor:"xfzf49",unselectedBorderColor:"_207kto",selectedReadonlyColor:"_14rntab",selectedReadonlyBorderColor:"hq4a26",unselectedReadonlyColor:"_1n8wwe8",unselectedReadonlyBorderColor:"_6zy3iq",selectedDisabledColor:"ws9aya",unselectedDisabledColor:"_17tzs0b",selectedDisabledBorderColor:"_13eiqtt",unselectedDisabledBorderColor:"uc55tt"},C=({fillRatio:e,isDisabled:s,isReadonly:o,color:i})=>{const{direction:l}=n.useUser(),r="rtl"===l;return 1===e||0===e?t.jsx(E,{isSelected:1===e,isDisabled:s,isReadOnly:o,color:i}):t.jsxs(a.Fragment,{children:[t.jsx("div",Object.assign({class:F.base,style:{clipPath:`inset(0% ${r?100*(1-e):0}% 0% ${r?0:100*e}%)`}},{children:t.jsx(E,{isSelected:!1,isDisabled:s,isReadOnly:o,color:i})})),t.jsx("div",Object.assign({class:F.base,style:{clipPath:`inset(0% ${r?0:100*(1-e)}% 0% ${r?100*(1-e):0}%)`}},{children:t.jsx(E,{isSelected:!0,isDisabled:s,isReadOnly:o,color:i})}))]})},F={base:"_1txmgwj"};function S(e,s,t,a,o){const i=a.current;if(!i||0===i.width)return-1;const l=e-i.x,r=s*(o?i.width-l:l)/i.width/t;return r<.5?0:Math.ceil(r)*t}function M(e){if(!e)return{width:0,x:0};const s=e.getBoundingClientRect();return{width:Math.round(s.width),x:Math.round(s.x+window.scrollX)}}const B={base:"_1m4n1gx",interactive:"rnwn0d",lg:"pjszez",md:"hv9pj",sm:"_4hif9x",item:"_1glw1lw"};e.RatingGauge=function(e){var{max:i=5,value:l=0,size:b="md",color:h="neutral",step:p=1,isReadonly:m,isDisabled:x}=e,y=s.__rest(e,["max","value","size","color","step","isReadonly","isDisabled"]);const v=o.useRef(null),_=o.useRef(M(null)),g=!m&&!x;o.useEffect(()=>{_.current=M(v.current)},[b,i]);const f=((e,s,t,a,i,l,r,c)=>{const d=o.useRef(),{direction:u}=n.useUser();if(!l)return{};const b="rtl"===u,h=e=>{null==c||c({value:e}),d.current=e},p=e=>{e.preventDefault(),e.stopPropagation()};return{onPointerUp:t=>{const a=S(t.pageX,e,s,i,b);-1!==a&&(null==r||r({value:a}))},onBlur:()=>{null==r||r({value:t})},onPointerMove:t=>{const a=S(t.pageX,e,s,i,b);-1!==a&&a!=d.current&&h(a)},onKeyUp:s=>{switch(s.key){case"Enter":null==r||r({value:t});break;case"Tab":h(t);break;case"Home":h(0);break;case"End":h(e)}p(s)},onKeyDown:a=>{switch(a.key){case"Tab":return;case"ArrowDown":h(Math.max(0,t-s));break;case"ArrowUp":h(Math.min(e,t+s));break;case"ArrowLeft":{const a=b?Math.min(e,t+s):Math.max(0,t-s);h(a);break}case"ArrowRight":{const a=b?Math.max(0,t-s):Math.min(e,t+s);h(a);break}}p(a)},onPointerLeave:()=>{h(void 0)},onPointerEnter:()=>{i.current=M(a.current)}}})(i,p,l,v,_,g,y.onCommit,y.onInput),{tooltipContent:w,tooltipProps:A}=function({max:e,value:s,isReadonly:t,isDisabled:a,tooltip:i,datatip:l,ariaDescribedBy:r,width:n}){const[d,u]=o.useState(!1),b=t&&!a?"tooltip":"datatip",h=a||!("tooltip"===b&&i||"datatip"===b&&l),p=Math.max(1,Math.ceil(s)),m="tooltip"===b?0:(p-Math.ceil(e/2))*n/e,{tooltipContent:x,tooltipProps:y}=c.useTooltipControlled({text:"tooltip"===b?i:l,isOpen:d,anchor:{x:"element",y:"element"},position:"bottom",offset:{mainAxis:8,crossAxis:m},isDisabled:h,onToggle:({value:e})=>u(e),variant:b});return y["aria-describedby"]=[r,y["aria-describedby"]].filter(Boolean).join(" "),{tooltipContent:x,tooltipProps:y}}({max:i,value:l,isReadonly:m,isDisabled:x,tooltip:y.tooltip,datatip:y.datatip,width:_.current.width,ariaDescribedBy:y.ariaDescribedBy}),R=d.mergeProps(f,A),j=(e=>e.accessibleLabel?e.accessibleLabel:e.tooltip&&e.isReadonly&&!e.isDisabled?e.tooltip:void 0)({accessibleLabel:y.accessibleLabel,tooltip:y.tooltip,isReadonly:m,isDisabled:x}),{isTabbable:U}=u.useTabbableMode();return t.jsxs(a.Fragment,{children:[t.jsx("div",Object.assign({ref:v,class:r.classNames([B.base,g?B.interactive:void 0]),"aria-label":j,role:"slider","aria-valuemin":"0","aria-valuenow":l,"aria-valuemax":i,"aria-valuetext":l,"aria-labelledby":y.ariaLabelledBy,tabIndex:U&&!x?0:-1,"aria-disabled":x?"true":void 0,"aria-readonly":m&&!x?"true":void 0},R,{children:[...Array(i)].map((e,s)=>{const a=Math.min(Math.max(0,l-s),1);return t.jsx("div",Object.assign({className:r.classNames([B[b],B.item])},{children:t.jsx(C,{fillRatio:a,isDisabled:x,isReadonly:m,color:h})}))})})),w]})},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=UNSAFE_RatingGauge.js.map
